<% include admin_header.ejs %>
<div class="admin-right-container">
	<h2>编辑课程</h2><hr>
	<form class="admin-form" role="form" enctype="multipart/form-data" method="post">
		<% if (error) { %>
			<div class="alert alert-danger alert-dismissable">
			   <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
		      	<%= error %>
		    </div>
	    <% } %>
		<fieldset>
			<div class="form-group">
				<label for="name">课程名称</label>
				<input type="text" class="form-control" id="title" name="title" placeholder="请输入课程名称" <% if (course && course.title) { %>value="<%= course.title %>"<%}%> required rows="3">
			</div>
			<div class="form-group">
				<label class="control-label">课程描述</label>
				<textarea class="form-control" type="textarea" name="description" required rows="3"><% if(course && course.description) {%><%= course.description %>
				<% } %></textarea>
			</div>
			<div class="form-group">
				<label for="name">价格</label>
				<input type="text" class="form-control" id="price" name="price" placeholder="请输入价格" <% if (course && course.price) { %>value="<%= course.price %>"<%}%> required rows="3">
			</div>
			<div class="form-group">
				<label for="name">Tip</label>
				<input type="text" class="form-control" id="tip" name="tip" placeholder="请输入tip" <% if (course && course.tip) { %>value="<%= course.tip %>"<%}%> required rows="3">
			</div>
			<div class="form-group">
				<label for="category">更新状态</label>
				<select class="form-control" name = "update_status" required>
					<% if(update_status) { %>
						<% update_status.forEach(function(status) { %>
							<option value=<%= status.id %> 
								<% if(course && course.update_status == status.id) { %>
									selected = "selected";
								<% } %>
							>
								<%= status.name %>
							</option>
						<% }) %>
					<% } %>
				</select>
			</div>
			<div class="form-group">
				<label for="category">难度</label>
				<select class="form-control" name = "level" required>
					<% if(levels) { %>
						<% levels.forEach(function(level) { %>
							<option value=<%= level.id %> 
								<% if(course && course.level == level.id) { %>
									selected = "selected";
								<% } %>
							>
								<%= level.name %>
							</option>
						<% }) %>
					<% } %>
				</select>
			</div>
			<div class="form-group">
				<label for="category">分类</label>
				<select class="form-control" name = "category" required>
					<% if(categories) { %>
						<% categories.forEach(function(category) { %>
							<option value=<%= category.id %> 
								<% if(course && course.course_category_id == category.id) { %>
									selected = "selected";
								<% } %>
							>
								<%= category.name %>
							</option>
						<% }) %>
					<% } %>
				</select>
			</div>
			<div class="form-group">
				<% if(course && course.cover_url) {%>
					<img src= "/<%- course.cover_url %>" class="img-thumbnail admin-thumbnail"><br>
				<% } %>
				<label class="control-label">选择书籍封面</label>
				<input name="pic" type="file" accept=".jpg,.jpeg"> 
			</div>

			<div class="row">
				<div class="col-md-2">
					<button type="submit" class="btn btn-primary btn-block">保存</button>
				</div>
			</div>
		</fieldset>
	</form>
</div>
<% include admin_footer.ejs %>
